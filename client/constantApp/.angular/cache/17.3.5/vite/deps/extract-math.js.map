{
  "version": 3,
  "sources": ["../../../../../node_modules/extract-math/node_modules/escape-string-regexp/index.js", "../../../../../node_modules/extract-math/lib/index.js"],
  "sourcesContent": ["'use strict';\n\nmodule.exports = string => {\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\t// Escape characters with special meaning either inside or outside character sets.\n\t// Use a simple backslash escape when it’s always valid, and a \\unnnn escape when the simpler form would be disallowed by Unicode patterns’ stricter grammar.\n\treturn string\n\t\t.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')\n\t\t.replace(/-/g, '\\\\x2d');\n};\n", "\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extractMath = void 0;\nvar escape_string_regexp_1 = __importDefault(require(\"escape-string-regexp\"));\nvar Context = /** @class */ (function () {\n    function Context(options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e, _f;\n        this.segments = [];\n        var escape = (_a = options === null || options === void 0 ? void 0 : options.escape) !== null && _a !== void 0 ? _a : '\\\\';\n        this.delimiters = {\n            inline: (_c = (_b = options === null || options === void 0 ? void 0 : options.delimiters) === null || _b === void 0 ? void 0 : _b.inline) !== null && _c !== void 0 ? _c : ['$', '$'],\n            display: (_e = (_d = options === null || options === void 0 ? void 0 : options.delimiters) === null || _d === void 0 ? void 0 : _d.display) !== null && _e !== void 0 ? _e : ['$$', '$$']\n        };\n        this.allowSurroundingSpace = new Set((_f = options === null || options === void 0 ? void 0 : options.allowSurroundingSpace) !== null && _f !== void 0 ? _f : ['display']);\n        var _g = __read([\n            escape,\n            this.delimiters.inline[0],\n            this.delimiters.inline[1],\n            this.delimiters.display[0],\n            this.delimiters.display[1]\n        ].map(escape_string_regexp_1.default), 5), escEscape = _g[0], escInlineBegin = _g[1], escInlineEnd = _g[2], escDisplayBegin = _g[3], escDisplayEnd = _g[4];\n        var escapedDelimiter = escEscape + \"(\" + escDisplayBegin + \"|\" + escDisplayEnd + \"|\" + escInlineBegin + \"|\" + escInlineEnd + \")\";\n        var _h = __read(Object.entries(this.delimiters).map(function (_a) {\n            var _b = __read(_a, 2), mode = _b[0], delimiters = _b[1];\n            var _c = __read(delimiters.map(escape_string_regexp_1.default), 2), begin = _c[0], end = _c[1];\n            var math = \"(?:(?!\" + end + \").|\" + escEscape + end + \")*?(?:\" + escEscape + end + \"|[^\" + escEscape + \"])\";\n            if (!_this.allowSurroundingSpace.has(mode)) {\n                math = \"\\\\S\" + math.substring(0, math.length - 2) + \"\\\\s])|[^\" + escEscape + \"\\\\s]\";\n            }\n            return begin + \"(\" + math + \")\" + end + \"(?!\\\\d)\";\n        }), 2), inlineMath = _h[0], displayMath = _h[1];\n        this.regex = new RegExp([escapedDelimiter, displayMath, inlineMath].join('|'));\n        this.escapedDelimiter = new RegExp(escapedDelimiter, 'g');\n    }\n    Context.prototype.split = function (input) {\n        return input.split(this.regex);\n    };\n    Context.prototype.pushText = function (text) {\n        if (!text) {\n            return;\n        }\n        var last = this.segments[this.segments.length - 1];\n        if (last && last.type === 'text') {\n            last.value += text;\n            last.raw += text;\n        }\n        else {\n            this.segments.push({ type: 'text', math: false, value: text, raw: text });\n        }\n    };\n    Context.prototype.pushMath = function (mode, text) {\n        if (!text) {\n            return;\n        }\n        this.segments.push({ type: mode, math: true, value: text.replace(this.escapedDelimiter, '$1'), raw: text });\n    };\n    return Context;\n}());\nfunction extractMath(input, options) {\n    var _a;\n    var ctx = new Context(options);\n    var _b = __read(ctx.split(input)), text = _b[0], parts = _b.slice(1);\n    ctx.pushText(text);\n    while (parts.length > 0) {\n        var _c = __read(parts), delimiter = _c[0], display = _c[1], inline = _c[2], rest = _c.slice(3);\n        if (delimiter) {\n            ctx.pushText(delimiter);\n        }\n        else {\n            ctx.pushMath(display ? 'display' : 'inline', display || inline);\n        }\n        _a = __read(rest), text = _a[0], parts = _a.slice(1);\n        ctx.pushText(text);\n    }\n    return ctx.segments;\n}\nexports.extractMath = extractMath;\n"],
  "mappings": "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",
  "names": ["Context", "_a", "_b", "_c"]
}
